<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football | MarketMatrix</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <div class="container">
        <!-- LEFT COLUMN: API LOADER & INPUTS -->
        <div class="sidebar-column">
            <!-- CONTROLS -->
            <a href="index.html" class="btn btn-home block w-full mb-2\.5 no-underline">
                &larr; Home
            </a>
            <button id="toggleAllBtn" onclick="toggleAllCards()" class="mt-0 mb-5">Collapse
                All</button>

            <!-- API MATCH LOADER -->

            <div class="card mb-5" id="apiMatchLoader">
                <div class="card-header" onclick="toggleCard('apiMatchLoader')">
                    <h2>0. Select Match</h2>
                </div>
                <div class="card-content">
                    <div class="flex-col gap-3">
                        <div>
                            <label class="form-label">COUNTRY</label>
                            <select id="apiCountrySelect" class="form-select">
                                <option value="">Loading...</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">COMPETITION</label>
                            <select id="apiLeagueSelect" class="form-select" disabled>
                                <option value="">Select country</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">MATCH</label>
                            <select id="apiMatchSelect" class="form-select-dark" disabled>
                                <option value="">Select competition</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- INPUT ODDS -->
            <div class="card" id="inputCard">
                <div class="card-header" onclick="toggleCard('inputCard')">
                    <h2>1. Input Odds</h2>
                </div>
                <div class="card-content">
                    <h3>1x2 Odds <span id="oneWtMargin" class="margin-info">Margin:
                            -</span></h3>
                    <div class="input-group">
                        <label>Home</label>
                        <input type="number" id="homeOdds" step="0.01" value="2.10" oninput="runModel()">
                    </div>
                    <div class="input-group">
                        <label>Draw</label>
                        <input type="number" id="drawOdds" step="0.01" value="3.40" oninput="runModel()">
                    </div>
                    <div class="input-group">
                        <label>Away</label>
                        <input type="number" id="awayOdds" step="0.01" value="3.50" oninput="runModel()">
                    </div>

                    <h3>Goal Line <span id="goalsMargin" class="margin-info">Margin:
                            -</span></h3>
                    <div class="input-group">
                        <label>Line</label>
                        <input type="number" id="goalLine" step="0.5" value="2.5" oninput="runModel()">
                    </div>
                    <div class="input-group">
                        <label id="overLabel">Over</label>
                        <input type="number" id="overOdds" step="0.01" value="1.95" oninput="runModel()">
                    </div>
                    <div class="input-group">
                        <label id="underLabel">Under</label>
                        <input type="number" id="underOdds" step="0.01" value="1.90" oninput="runModel()">
                    </div>

                    <h3 class="mt-4 text-xl">Half Goal Ratios</h3>
                    <p class="text-xs text-slate mt-neg-2 mb-2\.5">Goal
                        distribution per half (default 45/55)</p>
                    <div class="grid grid-cols-2 gap-2\.5">
                        <div class="input-group mb-0">
                            <label>1st Half %</label>
                            <input type="number" id="ratio1H" step="1" value="45" min="30" max="70"
                                onchange="syncRatio('1H'); runModel()" oninput="runModel()">
                        </div>
                        <div class="input-group mb-0">
                            <label>2nd Half %</label>
                            <input type="number" id="ratio2H" step="1" value="55" min="30" max="70"
                                onchange="syncRatio('2H'); runModel()" oninput="runModel()">
                        </div>
                    </div>

                    <h3 class="mt-5">Reverse λ / μ</h3>
                    <div class="stat-grid">
                        <div class="stat-box">
                            <div class="stat-val" id="xgHome">-</div>
                            <div class="stat-label">Home λ</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-val" id="xgAway">-</div>
                            <div class="stat-label">Away μ</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-val" id="zipOmega">-</div>
                            <div class="stat-label">ZIP ω</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- COLUMN 2: FULL TIME MARKETS -->
        <div class="main-content">
            <div class="card hidden" id="ftArea">
                <div class="card-header" onclick="toggleCard('ftArea')">
                    <h2>2. Full Time Markets</h2>
                </div>
                <div class="card-content">
                    <h3 class="text-lg">Match Result / Double Chance</h3>
                    <div class="stat-grid grid-cols-3">
                        <div class="stat-box">
                            <div class="stat-val prob-val" id="shinHome">-</div>
                            <div class="stat-label">Home %</div>
                            <div class="stat-sub-val sub-val" id="fairOddsHome">-</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-val prob-val" id="shinDraw">-</div>
                            <div class="stat-label">Draw %</div>
                            <div class="stat-sub-val sub-val" id="fairOddsDraw">-</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-val prob-val" id="shinAway">-</div>
                            <div class="stat-label">Away %</div>
                            <div class="stat-sub-val sub-val" id="fairOddsAway">-</div>
                        </div>
                    </div>
                    <div class="table-wrapper"><table class="mb-5">
                        <tbody id="ftDcTable"></tbody>
                    </table></div>

                    <h3 class="mt-5">Draw No Bet</h3>
                    <div class="table-wrapper"><table class="mb-5">
                        <tbody id="ftDnbTable"></tbody>
                    </table></div>

                    <h3 class="mt-5">BTTS (Yes/No)</h3>
                    <div class="table-wrapper"><table class="mb-5">
                        <tbody id="bttsTable"></tbody>
                    </table></div>

                    <h3>Total Goals (FT)</h3>
                    <div class="table-wrapper"><table>
                        <thead>
                            <tr>
                                <th>Line</th>
                                <th class="num-col">Over</th>
                                <th class="num-col">Under</th>
                            </tr>
                        </thead>
                        <tbody id="totalGoalsTable"></tbody>
                    </table></div>

                    <h3 class="mt-5">Total Goals Range (FT)</h3>
                    <div class="table-wrapper"><table class="text-md">
                        <tbody id="totalSpreadTable"></tbody>
                    </table></div>

                    <h3 class="mt-5">Result & Totals (2.5)</h3>
                    <div class="table-wrapper"><table class="text-md">
                        <thead>
                            <tr>
                                <th>Outcome</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="comboTable"></tbody>
                    </table></div>

                    <h3 class="mt-5">HT / FT</h3>
                    <div class="table-wrapper"><table class="text-md mb-5">
                        <thead>
                            <tr>
                                <th>HT/FT</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="htftTable"></tbody>
                    </table></div>




                </div>
            </div>

            <!-- ASIAN HANDICAP BLOCK -->
            <div class="card hidden mt-5" id="ahArea">
                <div class="card-header" onclick="toggleCard('ahArea')">
                    <h2>Asian Handicap</h2>
                </div>
                <div class="card-content">
                    <div class="table-wrapper"><table>
                        <thead>
                            <tr>
                                <th>Line</th>
                                <th class="num-col">Home</th>
                                <th class="num-col">Away</th>
                            </tr>
                        </thead>
                        <tbody id="ahTable"></tbody>
                    </table></div>
                </div>
            </div>

            <!-- DRAW COMBINATIONS BLOCK -->
            <div class="card hidden mt-5" id="drawComboArea">
                <div class="card-header" onclick="toggleCard('drawComboArea')">
                    <h2>8. Draw Combinations</h2>
                </div>
                <div class="card-content">
                    <p class="description-text">
                        Interval Draw correlations
                    </p>
                    <div class="table-wrapper"><table class="text-md">
                        <thead>
                            <tr>
                                <th>Combination</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="drawComboTable"></tbody>
                    </table></div>
                </div>
            </div>

            <!-- DOUBLE CHANCE COMBINATIONS BLOCK -->
            <div class="card hidden mt-5" id="dcComboArea">
                <div class="card-header" onclick="toggleCard('dcComboArea')">
                    <h2>9. Double Chance Combinations</h2>
                </div>
                <div class="card-content">
                    <p class="description-text">
                        Join Interval Double Chance outcomes
                    </p>
                    <div class="table-wrapper"><table class="text-md">
                        <thead>
                            <tr>
                                <th>Combination</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="dcComboTable"></tbody>
                    </table></div>
                </div>
            </div>

            <!-- HT/FT COMBINATIONS BLOCK -->
            <div class="card hidden mt-5" id="htftComboArea">
                <div class="card-header" onclick="toggleCard('htftComboArea')">
                    <h2>10. HT/FT Combinations</h2>
                </div>
                <div class="card-content">
                    <p class="description-text">
                        HT/FT joint outcome correlations
                    </p>
                    <div class="table-wrapper"><table class="text-md">
                        <thead>
                            <tr>
                                <th>Combination</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="htftComboTable"></tbody>
                    </table></div>
                </div>
            </div>

            <!-- HOME TEAM GOALS COMBINATIONS BLOCK -->
            <div class="card hidden mt-5" id="homeGoalComboArea">
                <div class="card-header" onclick="toggleCard('homeGoalComboArea')">
                    <h2>11. Home Team Goals Combinations</h2>
                </div>
                <div class="card-content">
                    <p class="description-text">
                        T1 = Home Team
                    </p>
                    <div class="table-wrapper"><table class="text-md">
                        <thead>
                            <tr>
                                <th>Combination</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="homeGoalComboTable"></tbody>
                    </table></div>
                </div>
            </div>

            <!-- AWAY TEAM GOALS COMBINATIONS BLOCK -->
            <div class="card hidden mt-5" id="awayGoalComboArea">
                <div class="card-header" onclick="toggleCard('awayGoalComboArea')">
                    <h2>12. Away Team Goals Combinations</h2>
                </div>
                <div class="card-content">
                    <p class="description-text">
                        T2 = Away Team
                    </p>
                    <div class="table-wrapper"><table class="text-md">
                        <thead>
                            <tr>
                                <th>Combination</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="awayGoalComboTable"></tbody>
                    </table></div>
                </div>
            </div>

            <!-- HOME TEAM BLOCK -->
            <div class="card hidden mt-5" id="homeTeamArea">
                <div class="card-header" onclick="toggleCard('homeTeamArea')">
                    <h2>5. Home Team Markets</h2>
                </div>
                <div class="card-content">
                    <div class="two-col-grid">
                        <div>
                            <h3 class="text-lg">Team Goals (FT)</h3>
                            <div class="table-wrapper"><table>
                                <thead>
                                    <tr>
                                        <th>Line</th>
                                        <th class="num-col">Over</th>
                                        <th class="num-col">Under</th>
                                    </tr>
                                </thead>
                                <tbody id="homeFtTable"></tbody>
                            </table></div>
                        </div>
                        <div>
                            <h3 class="text-lg">Team Goals (1H)</h3>
                            <div class="table-wrapper"><table>
                                <thead>
                                    <tr>
                                        <th>Line</th>
                                        <th class="num-col">Over</th>
                                        <th class="num-col">Under</th>
                                    </tr>
                                </thead>
                                <tbody id="home1hTable"></tbody>
                            </table></div>
                            <h3 class="text-lg mt-4">Team Goals (2H)</h3>
                            <div class="table-wrapper"><table>
                                <thead>
                                    <tr>
                                        <th>Line</th>
                                        <th class="num-col">Over</th>
                                        <th class="num-col">Under</th>
                                    </tr>
                                </thead>
                                <tbody id="home2hTable"></tbody>
                            </table></div>
                        </div>
                    </div>

                    <h3 class="text-lg">Exact Goals (FT)</h3>
                    <div class="table-wrapper"><table class="mb-5">
                        <tbody id="homeExactTable"></tbody>
                    </table></div>

                    <h3 class="text-lg">Goal Spreads (FT)</h3>
                    <div class="table-wrapper"><table class="mb-5">
                        <tbody id="homeSpreadTable"></tbody>
                    </table></div>

                    <h3 class="text-lg">Win Combinations</h3>
                    <div class="table-wrapper"><table class="text-md">
                        <thead>
                            <tr>
                                <th>Combination</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="homeWinComboTable"></tbody>
                    </table></div>
                </div>
            </div>
        </div>

        <!-- COLUMN 3: INTERVAL MARKETS -->
        <div class="markets-content">
            <!-- BET BUILDER BLOCK -->
            <div class="card mb-5 border-blue" id="betBuilderArea">
                <div class="card-header bg-blue-opacity" onclick="toggleCard('betBuilderArea')">
                    <h2 class="text-blue">★ Bet Builder</h2>
                </div>
                <div class="card-content">
                    <div class="flex gap-2 mb-3">
                        <select id="bbMarketSelect" class="form-select-flex">
                            <option value="1">Match Result: Home</option>
                            <option value="X">Match Result: Draw</option>
                            <option value="2">Match Result: Away</option>
                            <option value="1X">Double Chance: 1X</option>
                            <option value="12">Double Chance: 12</option>
                            <option value="X2">Double Chance: X2</option>
                            <option value="O25">Total Goals: Over...</option>
                            <option value="U25">Total Goals: Under...</option>
                            <option value="BTTS_Y">BTTS: Yes</option>
                            <option value="BTTS_N">BTTS: No</option>
                        </select>
                        <button onclick="addBbLeg()" class="btn-add">Add</button>
                    </div>

                    <div id="bbLegsList" class="bb-legs-list">
                        <!-- Legs go here -->
                        <div class="empty-state">No selections added.</div>
                    </div>

                    <div class="combined-stats">
                        <div class="stat-label text-lg">Combined Odds</div>
                        <div class="text-right">
                            <div class="stat-val text-blue" id="bbOdds">-</div>
                            <div class="stat-sub-val text-slate-light" id="bbProb">-</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 1ST HALF BLOCK -->
            <div class="card hidden mb-5" id="fhArea">
                <div class="card-header" onclick="toggleCard('fhArea')">
                    <h2>3. 1st Half Markets</h2>
                </div>
                <div class="card-content">
                    <h3>1H 1X2</h3>
                    <div class="table-wrapper"><table class="mb-4">
                        <thead>
                            <tr>
                                <th>Outcome</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="fh1x2Table"></tbody>
                    </table></div>

                    <h3>1H Goals</h3>
                    <div class="table-wrapper"><table class="mb-5">
                        <thead>
                            <tr>
                                <th>Line</th>
                                <th class="num-col">Over</th>
                                <th class="num-col">Under</th>
                            </tr>
                        </thead>
                        <tbody id="fhGoalsTable"></tbody>
                    </table></div>

                    <h3 class="mt-5">1H Draw No Bet</h3>
                    <div class="table-wrapper"><table class="mb-5">
                        <tbody id="fhDnbTable"></tbody>
                    </table></div>

                    <div class="two-col-grid">
                        <div>
                            <h3 class="text-lg">1H BTTS</h3>
                            <div class="table-wrapper"><table>
                                <tbody id="fhBttsTable"></tbody>
                            </table></div>
                        </div>
                        <div>
                            <h3 class="text-lg">1H DC</h3>
                            <div class="table-wrapper"><table>
                                <tbody id="fhDcTable"></tbody>
                            </table></div>
                        </div>
                    </div>

                    <h3 class="text-lg">1H Exact Goals</h3>
                    <div class="table-wrapper"><table class="mb-5">
                        <tbody id="fhExactTable"></tbody>
                    </table></div>

                    <h3 class="text-lg">1H Goal Spreads</h3>
                    <div class="table-wrapper"><table>
                        <tbody id="fhSpreadTable"></tbody>
                    </table></div>
                </div>
            </div>

            <!-- 2ND HALF BLOCK -->
            <div class="card hidden" id="shArea">
                <div class="card-header" onclick="toggleCard('shArea')">
                    <h2>4. 2nd Half Markets</h2>
                </div>
                <div class="card-content">
                    <p class="description-text">Independent
                        2H goals</p>

                    <h3>2H 1X2</h3>
                    <div class="table-wrapper"><table class="mb-4">
                        <thead>
                            <tr>
                                <th>Outcome</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="sh1x2Table"></tbody>
                    </table></div>

                    <h3>2H Goals</h3>
                    <div class="table-wrapper"><table class="mb-5">
                        <thead>
                            <tr>
                                <th>Line</th>
                                <th class="num-col">Over</th>
                                <th class="num-col">Under</th>
                            </tr>
                        </thead>
                        <tbody id="shGoalsTable"></tbody>
                    </table></div>

                    <h3 class="mt-5">2H Draw No Bet</h3>
                    <div class="table-wrapper"><table class="mb-5">
                        <tbody id="shDnbTable"></tbody>
                    </table></div>

                    <div class="two-col-grid">
                        <div>
                            <h3 class="text-lg">2H BTTS</h3>
                            <div class="table-wrapper"><table>
                                <tbody id="shBttsTable"></tbody>
                            </table></div>
                        </div>
                        <div>
                            <h3 class="text-lg">2H DC</h3>
                            <div class="table-wrapper"><table>
                                <tbody id="shDcTable"></tbody>
                            </table></div>
                        </div>
                    </div>

                    <h3 class="text-lg">2H Exact Goals</h3>
                    <div class="table-wrapper"><table class="mb-5">
                        <tbody id="shExactTable"></tbody>
                    </table></div>

                    <h3 class="text-lg">2H Goal Spreads</h3>
                    <div class="table-wrapper"><table>
                        <tbody id="shSpreadTable"></tbody>
                    </table></div>
                </div>
            </div>

            <!-- AWAY TEAM BLOCK -->
            <div class="card hidden mt-5 mb-5" id="awayTeamArea">
                <div class="card-header" onclick="toggleCard('awayTeamArea')">
                    <h2>6. Away Team Markets</h2>
                </div>
                <div class="card-content">
                    <div class="two-col-grid">
                        <div>
                            <h3 class="text-lg">Team Goals (FT)</h3>
                            <div class="table-wrapper"><table>
                                <thead>
                                    <tr>
                                        <th>Line</th>
                                        <th class="num-col">Over</th>
                                        <th class="num-col">Under</th>
                                    </tr>
                                </thead>
                                <tbody id="awayFtTable"></tbody>
                            </table></div>
                        </div>
                        <div>
                            <h3 class="text-lg">Team Goals (1H)</h3>
                            <div class="table-wrapper"><table>
                                <thead>
                                    <tr>
                                        <th>Line</th>
                                        <th class="num-col">Over</th>
                                        <th class="num-col">Under</th>
                                    </tr>
                                </thead>
                                <tbody id="away1hTable"></tbody>
                            </table></div>
                            <h3 class="text-lg mt-4">Team Goals (2H)</h3>
                            <div class="table-wrapper"><table>
                                <thead>
                                    <tr>
                                        <th>Line</th>
                                        <th class="num-col">Over</th>
                                        <th class="num-col">Under</th>
                                    </tr>
                                </thead>
                                <tbody id="away2hTable"></tbody>
                            </table></div>
                        </div>
                    </div>

                    <h3 class="text-lg">Exact Goals (FT)</h3>
                    <div class="table-wrapper"><table class="mb-5">
                        <tbody id="awayExactTable"></tbody>
                    </table></div>

                    <h3 class="text-lg">Goal Spreads (FT)</h3>
                    <div class="table-wrapper"><table class="mb-5">
                        <tbody id="awaySpreadTable"></tbody>
                    </table></div>

                    <h3 class="text-lg">Win Combinations</h3>
                    <div class="table-wrapper"><table class="text-md">
                        <thead>
                            <tr>
                                <th>Combination</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="awayWinComboTable"></tbody>
                    </table></div>
                </div>
            </div>

            <!-- GOALS COMBINATIONS BLOCK -->
            <div class="card hidden" id="goalComboArea">
                <div class="card-header" onclick="toggleCard('goalComboArea')">
                    <h2>7. Goals Combinations</h2>
                </div>
                <div class="card-content">
                    <p class="description-text">
                        I = 1st Half, II = 2nd Half
                    </p>
                    <div class="table-wrapper"><table>
                        <thead>
                            <tr>
                                <th>Combination</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="intervalComboTable"></tbody>
                    </table></div>
                </div>
            </div>

            <!-- BTTS COMBINATIONS BLOCK -->
            <div class="card hidden" id="bttsComboArea">
                <div class="card-header" onclick="toggleCard('bttsComboArea')">
                    <h2>8. BTTS Combinations</h2>
                </div>
                <div class="card-content">
                    <p class="description-text">
                        GG = Both Teams to Score (FT), IGG = BTTS 1H, IIGG = BTTS 2H
                    </p>
                    <div class="table-wrapper"><table>
                        <thead>
                            <tr>
                                <th>Combination</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="bttsComboTable"></tbody>
                    </table></div>
                </div>
            </div>
            <!-- FIRST TEAM TO SCORE BLOCK -->
            <div class="card hidden" id="ftsComboArea">
                <div class="card-header" onclick="toggleCard('ftsComboArea')">
                    <h2>9. First Team to Score</h2>
                </div>
                <div class="card-content">
                    <p class="description-text">
                        T1 = Home, T2 = Away, no = No goals. I = 1H, II = 2H.
                    </p>
                    <div class="table-wrapper"><table>
                        <thead>
                            <tr>
                                <th>Market / Combination</th>
                                <th class="num-col">Prob</th>
                                <th class="num-col">Odds</th>
                            </tr>
                        </thead>
                        <tbody id="ftsComboTable"></tbody>
                    </table></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleCard(id) {
            document.getElementById(id).classList.toggle('collapsed');
        }

        function syncRatio(changed) {
            const r1H = document.getElementById('ratio1H');
            const r2H = document.getElementById('ratio2H');
            if (changed === '1H') {
                let val = Math.max(30, Math.min(70, parseInt(r1H.value) || 45));
                r1H.value = val;
                r2H.value = 100 - val;
            } else {
                let val = Math.max(30, Math.min(70, parseInt(r2H.value) || 55));
                r2H.value = val;
                r1H.value = 100 - val;
            }
        }
    </script>
    <script type="module" src="model.js"></script>
</body>

</html>